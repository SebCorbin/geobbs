\documentclass[a4paper,12pt]{report}

\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
\usepackage[T1]{fontenc}
%\usepackage[scaled]{helvet} % police
\usepackage{lmodern}
\usepackage{layout}
\usepackage[top=2cm, bottom=1.5cm, left=2cm, right=2cm]{geometry}
\usepackage{setspace}
\usepackage{verbatim}
\usepackage{moreverb}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{shorttoc}
\usepackage{xcolor}
\usepackage{currfile}
\usepackage{hyperref}

\setcounter{topnumber}{4}
\setcounter{bottomnumber}{4}
\setcounter{totalnumber}{10}
\renewcommand{\textfraction}{0.15}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.70}
\renewcommand{\floatpagefraction}{0.66}

%\include{chapterStyle}

\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height 1ex \hfill \kern \z@}
\def\@makechapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedleft \reset@font
            \scshape \@chapapp{} \thechapter
        \par\nobreak
        \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    %\vspace*{1\p@}%
    \hrulefill
    \par\nobreak
    \vskip 20\p@
  }}
\def\@makeschapterhead#1{%
  \vspace*{10\p@}%
  {\parindent \z@ \raggedleft \reset@font
            \scshape \vphantom{\@chapapp{} \thechapter}
        \par\nobreak
        \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    %\vspace*{1\p@}%
    \hrulefill
    \par\nobreak
    \vskip 20\p@
  }}

\renewcommand\thesection{\arabic{section}}
%\renewcommand*\familydefault{\sfdefault} %% Only if the base font of the document is to be sans serif


% Redéfinition de commandes

% Pour avoir les noms de chapitre en 1.1.3 etc...
\renewcommand\thesection{\arabic{chapter}.\arabic{section}}

% Désactiver les alinéas automatiques
%\parindent=0cm


% Création du glossaire

\setcounter{tocdepth}{4}

\begin{document}
  \begin{onehalfspace}

  % Page de garde
    \begin{titlepage}
      \begin{center}
        Sébastien Corbin et François-Guillaume Ribreau\\
        CSII 2\ieme année\\
        Le 21 Septembre 2011\\
      \end{center}
      \hrulefill
      \vspace{7cm}
      \begin{center}
        \LARGE \textbf{Dossier de spécifications}\\
        \vspace{3cm}
        \normalsize Génie Logiciel Embarqué
      \end{center}

      \vspace{9,5cm}

      \begin{center}
      \line(1,0){250}
      \end{center}

      \begin{center}
      \tiny{\currfilename}
      \end{center}


    \end{titlepage}
    \clearpage

  \thispagestyle{empty}
  \setcounter{page}{0}
  \clearpage

\chapter{Introduction}

\section{Matériel}
\subsection{Description}
L'iPhone  est une famille de smartphones conçue et commercialisée par Apple Inc. depuis 2007. Les modèles, dont l'interface utilisateur a été conçue avec le multi-touch, disposent d'un appareil photo, d'une fonction baladeur numérique, d'un client Internet (pour naviguer sur le Web ou consulter son courrier électronique), et de fonctions basiques telles que les SMS/MMS (messages texte et multimédia) ; mais disposent aussi de la messagerie vocale visuelle et de l'App Store, qui permet de télécharger des applications, allant des jeux aux réseaux sociaux, en passant par les GPS, la télévision, la presse électronique ou encore les bandes-dessinées. Au mois de mai 2010, on compte plus de 225 000 applications.

\subsection{Spécifications}
Les spécifications suivantes sont relatives à l'iPhone 4 (génération Juin 2010)
	\begin{description}
	\item[Système d'exploitation] iOS 4.3.5 (build 8L1, sortie le 25 juillet 2011)
	\item[Alimentation] Batterie lithium-polymère
	\item[Processeur] Puce apple A4 1 GHz
	\item[Stockage]	16/32 Go de mémoire flash
	\item[Mémoire] 512 Mio de DRAM
	\item[Écran] Écran multi-touch de 3,5 pouces
	\item[Résolution] 960 x 640 px (326 ppp)
	\item[Carte graphique]	PowerVR SGX 535 GPU
	\item[Caméra] \emph{Arrière} : 5 mégapixels, vidéo 720p avec Flash LED / \emph{Avant} : VGA
	\end{description}

\section{Le système d'exploitation iOS}
iOS, (anciennement iPhone OS), est le système d'exploitation mobile développé par Apple pour l'iPhone, l'iPod touch, et l'iPad. Il est dérivé de Mac OS X dont il partage les fondations (le kernel hybride XNU basé sur le micro-noyau Mach, les services Unix et Cocoa, etc.). iOS comporte quatre couches d'abstraction, similaires à celles de Mac OS X : une couche « Core OS », une couche « Core Services », une couche « Media » et une couche « Cocoa ». Le système d'exploitation occupe moins d'un demi-gigaoctet (Go) de la capacité mémoire totale de l'appareil.

\section{L'environnement de développement}
Le kit de développement, disponible uniquement pour Mac OS X, propose les outils nécessaires à la création d'une application pouvant tourner sous iOS. Si son téléchargement et son utilisation sont gratuits, la publication de telles applications requiert d'adhérer au programme des développeurs Apple, pour la somme de 99\$ par an. Il n'en demeure pas moins que cette offre peut s'avérer intéressante pour bon nombre de développeurs, étant donnée la taille du marché créé par iOS.
En plus d'offrir aux développeurs exactement les mêmes API que celles d'Apple, le SDK contient de nombreux outils facilitant le développement et le test d'applications pour iOS.

\subsection*{Outils de développement}
La plupart des outils de développement du SDK étaient déjà présents dans Mac OS avant son arrivée. Cependant, ils gèrent désormais l'utilisation de l'iPhone, en tant que plate-forme de développement :
\begin{description}
\item[Xcode] Environnement de Développement Intégré par défaut sur Mac OS X. Il permet l'écriture, la gestion et la compilation de projets de développement, écrits notamment en Objective-C. L'iPhone SDK y ajoute les librairies de développement pour iOS. Il est donc possible pour le développeur de créer des projets d'applications pour ce système. Pour tester l'application, deux possibilités existent : le développeur peut brancher un iPhone ou iPod Touch à son ordinateur Mac, puis y lancer l'application comme test, ou lancer l'application en test dans iPhone Simulator.
\item[Interface Builder] permet de construire une interface pour Cocoa Touch manuellement, à l'aide de glisser-déposer. Il permet également de traduire facilement une application dans plusieurs langues. De plus, il permet de gérer visuellement le schéma Modèle-Vue-Contrôleur, en connectant des éléments d'une interface à un code écrit pour eux au préalable, à l'aide d'un glisser-déposer. Finalement, le fichier d'interface ainsi créé est ajouté au projet Xcode.
Instruments est un outil de monitoring informatique. Il permet, une fois l'application lancée sur un iPhone ou iPod Touch branché à l'ordinateur, d'observer en temps réel ses performances au niveau du processeur, mais également, par exemple, du moteur graphique ou de l'accéléromètre. Par ailleurs, il est également possible de surveiller les performances système dans iPhone Simulator.
\item[iPhone Simulator] simule de manière logicielle un iPhone virtuel, qui peut exécuter des applications directement sur l'ordinateur. Les mouvements Multitouch sont alors reproduits manuellement à la souris par l'utilisateur, et il est possible de faire pivoter le simulateur grâce à des raccourcis clavier. Par ailleurs, l'utilisateur est en mesure de choisir quelle version du firmware il désire utiliser.
\end{description}

\chapter*{Architecture serveur}

Entry point (point d'entrée)
http://IP:3000/api/

\begin{description}
  \item[/check/{userId}/] \textbf{POST}
    \begin{itemize}
      \item Paramètres: lat, lon, userId
      \item
    \end{itemize}
  \item[/check/?lat={lat}&lon={lon}&d={distance}&c={count}] \textbf{GET}
    \begin{itemize}
      \item Paramètres: lat, lon, distance, count
    \end{itemize}
\end{description}

\chapter*{Base de données}

L'administration de la base de donnée se fera par l'utilisateur \lstinline{MongoDB}.

Collections en BDD:
\begin{description}
  \item[users] collection des utilisateurs
  \item[checks] collection des checks
\end{description}

Ajout d'une première entitée dans Checks:
\begin{description}
  \item[loc] \lstinline{[1,1]}
  \item[userId] \lstinline{ObjectId("4e7e0614bd99e29380000000")}
  \item[data] \lstinline{new Date()}
\end{description}

Ajout d'une première entitée dans Users
\begin{description}
  \item[login] \lstinline{FG}
  \item[password] \lstinline{"098f6bcd4621d373cade4e832627b4f6"} ("test" en MD5)
  \item[checks] \lstinline{[ObjectId("4e7e0614bd99e09890000000")]}
\end{description}

Ajout d'un index sur les checks via le CLI \lstinline{$mongo}:
\begin{lstlisting}[float=htb, language=bash, frame=lines, caption={Commandes à entrer dans le CLI mongo}, label={code:cliMongo}]
> use geobbs
> db.checks.ensureIndex({ loc : "2d" })
\end{lstlisting}

\chapter*{Ce qu'il faut traiter}
Intro
  Les os de l'embarqué
  ->(liste et ce qu'il font chacun)

  Notion d'entrée/sortie

  Les Env. de dev (avec particularité du remote debugging)

  Résumé des différentes méthodes (agile, xp etc..., tdd etc...)

Projet
  -> Equipe
  -> Cahier des charges

Choix de la méthodo:
  -> Méthode Agile
  -> + TDD

Languages:
Objective-C / JavaScript

Libraries:
ExpressJS (serveur http)
Mongoose http://mongoosejs.com/ (mongodb)

La sécuration est faites par oAuth

\chapter*{Matériel existant}
iPhone

MacBookPro 13 et 15 pouces

\chapter*{Analyse des librairies}

\href{http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/index.html}{Guide de programmation iOs}

Géolocalisation:

\href{http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html}{Introduction au développement relatif à la géolocalisation}

\chapter*{Interface utilisateur}
  \section*{Accueil}
  \begin{description}
    \item[Cas 1 :] GeoBbs est lié à Twitter, Foursquare, Facebook.

    Affichage des derniers Tweets/Check-in (avec algorithme d’importance) de ses amis dans le secteur où se trouve l’utilisateur

    \item[Cas 2 :] Aucun compte lié

    Affichage des dernières notifications envoyées dans le secteur où se trouve l’utilisateur.
    L’UI de la home ressemble à Foursquare:
      \begin{description}
      \item[Liste] Une liste des notifications
      \item[Menu en bas] Liste | Notifier | Réalité augmentée
      \end{description}
  \end{description}

  \end{onehalfspace}
\end{document}
